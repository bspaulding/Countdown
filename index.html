<html>
<head>
  <title>Countdown</title>
  <meta name="viewport" content="width=device-width,user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="stylesheet" href="stylesheets/styles.css"/>
  <script>
    var _ = {};
    _.map = function(c,f) { var r = []; for ( var i = 0; i < c.length; i += 1) { r.push(f(c[i])); } return r; };
    _.reject = function(c,f) { var r = []; for ( var i = 0; i < c.length; i += 1) { if ( !f(c[i]) ) { r.push(c[i]); } } return r; };
    _.select = function(c,f) { var r = []; for ( var i = 0; i < c.length; i += 1) { if (  f(c[i]) ) { r.push(c[i]); } } return r; };
    _.merge = function(c) { var o = {}; for ( var i = 0; i < c.length; i += 1 ) { for ( var k in c[i] ) { o[k] = c[i][k]; } } return o; }

    _.css = function(e,k,v) {
      var style = e.getAttribute('style');
      var sanitized = _.reject(style.split(';'), function(i) { return i === ""; });
      sanitized = _.map(sanitized, function(i) { return i.trim(); });
      var objects = _.map(sanitized, function(i) { var h = {}; var s = i.split(':'); h[s[0].trim()] = s[1].trim(); return h; });
      var styleObject = _.merge(objects);

      if ( v ) {
        styleObject[k] = v;
        style = '';
        for ( var key in styleObject ) {
          style += key + ':' + styleObject[key] + ';';
        }
        e.setAttribute('style', style);
      }

      return styleObject[k];
    }
  </script>
  <script src="javascripts/swipe_listener.js"></script>
  <script src="javascripts/jquery-1.7.2.min.js"></script>
  <script src="javascripts/ember.min.js"></script>
  <script src="javascripts/countdownmin.js"></script>
  <script src="javascripts/app.js"></script>
</head>
<body>
<script type="text/x-handlebars" data-template-name="page-view">
  {{collection contentBinding="content" tagName="ul" itemViewClass="CD.EventView" style="listStyle"}}
</script>
<script type="text/x-handlebars" data-template-name="events-view">
  {{collection contentBinding="CD.EventsController.content" tagName="ul" itemViewClass="CD.EventView" id="events"}}
</script>
<script type="text/x-handlebars" data-template-name="event-view">
  {{content.name}} ({{content.days}} days until {{content.date}})
</script>
<script type="text/x-handlebars">
  {{view CD.PageView contentBinding="CD.EventsController.content" itemViewClassName="CD.EventView"}}
  <div id="controls">
    {{#view Ember.Button target="CD.EventsController" action="addEvent"}}Add Event{{/view}}
    {{#view Ember.Button target="CD.EventsController" action="removeEvent"}}Remove Event{{/view}}
  </div>
</script>
<div class="card" style="display:none;">
  <div id="front" class="front face">
    <div id="info" class="card_flipper">i</div>
  </div>
  <div id="back" class="back face">
    <div id="done" class="card_flipper">Done</div>
    Back
  </div>
</div>
</body>
</html>
